import{r as i,j as e,L as X,a as G}from"./app-uAdQgTs8.js";import{D as Y,F as Z}from"./DashboardLayout-DfHjR-E3.js";import{C as v,a as y,b as N,d as _,c as b}from"./card-Xi4sK9zb.js";import{B as D}from"./button-Bb0dxY43.js";import{I as J}from"./input-xk17Qy7U.js";import{L as Q}from"./label-DaIKQcgy.js";import{c as F,a as k,b as ee}from"./utils-BGMc812E.js";import"./index-DLvvQ_1D.js";import{B as w}from"./badge-DDI3rdRa.js";import{U as se}from"./upload-D8jpkzwF.js";import{C as I,a as E}from"./circle-x-B7ZSbsbx.js";import"./index-W-PvzrYH.js";import"./sweetalert2.esm.all-DGhwgajj.js";import"./log-out-W70Bistv.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],T=F("Download",re);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ne=F("TriangleAlert",te),ae=ee("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),C=i.forwardRef(({className:s,variant:t,...n},a)=>e.jsx("div",{ref:a,role:"alert",className:k(ae({variant:t}),s),...n}));C.displayName="Alert";const le=i.forwardRef(({className:s,...t},n)=>e.jsx("h5",{ref:n,className:k("mb-1 font-medium leading-none tracking-tight",s),...t}));le.displayName="AlertTitle";const S=i.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,className:k("text-sm [&_p]:leading-relaxed",s),...t}));S.displayName="AlertDescription";function ie(s,t=[]){let n=[];function a(o,d){const l=i.createContext(d),c=n.length;n=[...n,d];const p=u=>{var g;const{scope:m,children:h,...x}=u,j=((g=m==null?void 0:m[s])==null?void 0:g[c])||l,R=i.useMemo(()=>x,Object.values(x));return e.jsx(j.Provider,{value:R,children:h})};p.displayName=o+"Provider";function f(u,m){var j;const h=((j=m==null?void 0:m[s])==null?void 0:j[c])||l,x=i.useContext(h);if(x)return x;if(d!==void 0)return d;throw new Error(`\`${u}\` must be used within \`${o}\``)}return[p,f]}const r=()=>{const o=n.map(d=>i.createContext(d));return function(l){const c=(l==null?void 0:l[s])||o;return i.useMemo(()=>({[`__scope${s}`]:{...l,[s]:c}}),[l,c])}};return r.scopeName=s,[a,oe(r,...t)]}function oe(...s){const t=s[0];if(s.length===1)return t;const n=()=>{const a=s.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const d=a.reduce((l,{useScope:c,scopeName:p})=>{const u=c(o)[`__scope${p}`];return{...l,...u}},{});return i.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return n.scopeName=t.scopeName,n}function $(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function ce(...s){return t=>{let n=!1;const a=s.map(r=>{const o=$(r,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let r=0;r<a.length;r++){const o=a[r];typeof o=="function"?o():$(s[r],null)}}}}function de(s){const t=ue(s),n=i.forwardRef((a,r)=>{const{children:o,...d}=a,l=i.Children.toArray(o),c=l.find(pe);if(c){const p=c.props.children,f=l.map(u=>u===c?i.Children.count(p)>1?i.Children.only(null):i.isValidElement(p)?p.props.children:null:u);return e.jsx(t,{...d,ref:r,children:i.isValidElement(p)?i.cloneElement(p,void 0,f):null})}return e.jsx(t,{...d,ref:r,children:o})});return n.displayName=`${s}.Slot`,n}function ue(s){const t=i.forwardRef((n,a)=>{const{children:r,...o}=n;if(i.isValidElement(r)){const d=he(r),l=xe(o,r.props);return r.type!==i.Fragment&&(l.ref=a?ce(a,d):d),i.cloneElement(r,l)}return i.Children.count(r)>1?i.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var me=Symbol("radix.slottable");function pe(s){return i.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===me}function xe(s,t){const n={...t};for(const a in t){const r=s[a],o=t[a];/^on[A-Z]/.test(a)?r&&o?n[a]=(...l)=>{const c=o(...l);return r(...l),c}:r&&(n[a]=r):a==="style"?n[a]={...r,...o}:a==="className"&&(n[a]=[r,o].filter(Boolean).join(" "))}return{...s,...n}}function he(s){var a,r;let t=(a=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?s.ref:(t=(r=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?s.props.ref:s.props.ref||s.ref)}var fe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],L=fe.reduce((s,t)=>{const n=de(`Primitive.${t}`),a=i.forwardRef((r,o)=>{const{asChild:d,...l}=r,c=d?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...l,ref:o})});return a.displayName=`Primitive.${t}`,{...s,[t]:a}},{}),V="Progress",U=100,[ge,Be]=ie(V),[je,ve]=ge(V),M=i.forwardRef((s,t)=>{const{__scopeProgress:n,value:a=null,max:r,getValueLabel:o=ye,...d}=s;(r||r===0)&&!A(r)&&console.error(Ne(`${r}`,"Progress"));const l=A(r)?r:U;a!==null&&!B(a,l)&&console.error(be(`${a}`,"Progress"));const c=B(a,l)?a:null,p=P(c)?o(c,l):void 0;return e.jsx(je,{scope:n,value:c,max:l,children:e.jsx(L.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":P(c)?c:void 0,"aria-valuetext":p,role:"progressbar","data-state":q(c,l),"data-value":c??void 0,"data-max":l,...d,ref:t})})});M.displayName=V;var O="ProgressIndicator",W=i.forwardRef((s,t)=>{const{__scopeProgress:n,...a}=s,r=ve(O,n);return e.jsx(L.div,{"data-state":q(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...a,ref:t})});W.displayName=O;function ye(s,t){return`${Math.round(s/t*100)}%`}function q(s,t){return s==null?"indeterminate":s===t?"complete":"loading"}function P(s){return typeof s=="number"}function A(s){return P(s)&&!isNaN(s)&&s>0}function B(s,t){return P(s)&&!isNaN(s)&&s<=t&&s>=0}function Ne(s,t){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${U}\`.`}function be(s,t){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${U} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var H=M,we=W;const z=i.forwardRef(({className:s,value:t,...n},a)=>e.jsx(H,{ref:a,className:k("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...n,children:e.jsx(we,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));z.displayName=H.displayName;function Fe(){const[s,t]=i.useState(!1),[n,a]=i.useState(null),[r,o]=i.useState(null),[d,l]=i.useState(0),c=u=>{var h;const m=(h=u.target.files)==null?void 0:h[0];m&&(a(m),o(null))},p=()=>{window.location.href="/products/bulkupload/template"},f=async()=>{var h;if(!n)return;t(!0),l(0);const u=new FormData;u.append("file",n);const m=setInterval(()=>{l(x=>Math.min(x+10,90))},200);try{const x=((h=document.querySelector('meta[name="csrf-token"]'))==null?void 0:h.getAttribute("content"))||"",R=(await G.post("/products/bulkupload",u,{headers:{"X-CSRF-TOKEN":x,"Content-Type":"multipart/form-data"},withCredentials:!0,onUploadProgress:g=>{if(g.total){const K=Math.round(g.loaded*100/g.total);l(Math.min(K,100))}}})).data;clearInterval(m),l(100),o(R)}catch{clearInterval(m),o({success:0,errors:["Upload failed. Please try again."],warnings:[]})}finally{t(!1),setTimeout(()=>l(0),1e3)}};return e.jsxs(Y,{title:"Bulk Product Upload",children:[e.jsx(X,{title:"Bulk Product Upload"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Bulk Product Upload"}),e.jsx("p",{className:"text-muted-foreground",children:"Upload multiple products with their variants, specifications, images, and videos using CSV file"})]})}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(v,{children:[e.jsxs(y,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),"Upload Products"]}),e.jsx(_,{children:"Select a CSV file containing your product data to upload in bulk"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"file",children:"CSV File"}),e.jsx(J,{id:"file",type:"file",accept:".csv,.txt",onChange:c,disabled:s,className:"w-full cursor-pointer"})]}),n&&e.jsx("div",{className:"p-3 bg-muted rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:n.name}),e.jsxs(w,{variant:"secondary",children:[(n.size/1024).toFixed(1)," KB"]})]})}),s&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Uploading products..."}),e.jsxs("span",{children:[d,"%"]})]}),e.jsx(z,{value:d,className:"w-full"})]}),e.jsx(D,{onClick:f,disabled:!n||s,variant:"outline",className:"w-full cursor-pointer rounded-lg bg-primary text-primary-foreground hover:bg-gray-100 dark:hover:bg-gray-800",children:s?"Uploading...":"Upload Products"})]})]}),e.jsxs(v,{children:[e.jsxs(y,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Download Template"]}),e.jsx(_,{children:"Download the CSV template with sample data and required format"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Template includes:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Basic product information"}),e.jsx("li",{children:"• Product variants (colors, sizes, SKUs)"}),e.jsx("li",{children:"• Product specifications"}),e.jsx("li",{children:"• Image URLs for automatic download"}),e.jsx("li",{children:"• Video information (YouTube, Vimeo)"}),e.jsx("li",{children:"• Sample data for reference"})]})]}),e.jsxs(D,{onClick:p,variant:"outline",className:"w-full cursor-pointer rounded-lg bg-primary text-primary-foreground hover:bg-gray-100 dark:hover:bg-gray-800",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Download CSV Template"]})]})]})]}),r&&e.jsxs(v,{children:[e.jsx(y,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[r.success>0?e.jsx(I,{className:"h-5 w-5 text-green-500"}):e.jsx(E,{className:"h-5 w-5 text-red-500"}),"Upload Results"]})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(w,{variant:"default",className:"bg-green-500",children:[r.success," Successful"]})}),r.errors.length>0&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(w,{variant:"destructive",children:[r.errors.length," Errors"]})}),r.warnings.length>0&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(w,{variant:"outline",className:"border-yellow-500 text-yellow-700",children:[r.warnings.length," Warnings"]})})]}),r.errors.length>0&&e.jsxs(C,{variant:"destructive",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Errors occurred during upload:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:r.errors.map((u,m)=>e.jsx("li",{className:"text-sm",children:u},m))})]})})]}),r.warnings.length>0&&e.jsxs(C,{children:[e.jsx(ne,{className:"h-4 w-4"}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Warnings:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:r.warnings.map((u,m)=>e.jsx("li",{className:"text-sm",children:u},m))})]})})]}),r.success>0&&e.jsxs(C,{children:[e.jsx(I,{className:"h-4 w-4"}),e.jsxs(S,{children:["Successfully uploaded ",r.success," products with all their variants, specifications, images, and videos."]})]})]})]}),e.jsxs(v,{children:[e.jsxs(y,{children:[e.jsx(N,{children:"CSV Format Guide"}),e.jsx(_,{children:"Understanding the CSV format for bulk product upload"})]}),e.jsx(b,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Basic Fields"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"name:"})," Product name"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"description:"})," Product description"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"category_name:"})," Category (will be created if not exists)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"subcategory_name:"})," Subcategory"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"brand_name:"})," Brand name"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"price:"})," Base price"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"discount:"})," Discount percentage"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"stock_quantity:"})," Stock quantity"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Advanced Fields"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"specifications:"})," Name:Value|Name:Value"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"variants:"})," Color-Size-SKU-Price-Discount-Stock"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"images:"})," URL1|URL2|URL3 (auto-downloaded)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"videos:"})," Provider-VideoID-Title"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"is_bestseller:"})," true/false"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"status:"})," active/inactive"]})]})]})]})})]})]})]})}export{Fe as default};
