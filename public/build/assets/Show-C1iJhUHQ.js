import{r as t,j as e,L as U,S as h}from"./app-DgxAqZIh.js";import{D as H,M as O,U as D}from"./DashboardLayout-T__Wzna3.js";import{B as x}from"./button-BdIkOZPE.js";import{I as y}from"./input-D5NTX-5y.js";import{S as I,a as L,b as E,c as V,d as r}from"./select-B3TSRGvZ.js";import{B as l}from"./badge-C8hEx-7x.js";import{T as W,a as q,b as u,c as n,d as z,e as i}from"./table-zCqAAXdz.js";import{T as _}from"./textarea-P2wA18Vb.js";import{S}from"./separator-D88g3QCv.js";import{B as $}from"./breadcrumbs-ChDlXGWW.js";import{S as w}from"./sweetalert2.esm.all-DGhwgajj.js";import{A as K}from"./arrow-left-DPkzOS6A.js";import{P as Q}from"./package-ni_ToA4w.js";import{c as R}from"./utils-DwYqQn47.js";import{C as F}from"./credit-card-BYuBEcYe.js";import{T as G}from"./truck-CYoZGNV0.js";import{f as c}from"./format-CBpsKyOP.js";import"./index-Ba_FneK2.js";import"./index-Ch4nA-VE.js";import"./card-BuoT8ScV.js";import"./shopping-cart-DLwSuZv_.js";import"./log-out-BHgaQSNh.js";import"./index-CBlRRNRR.js";import"./index-DRCW6475.js";import"./Combination-CYE5KBks.js";import"./check-DQduarsC.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],X=R("MapPin",J),Y=s=>{switch(s){case"pending":return"secondary";case"processing":return"default";case"shipped":return"default";case"delivered":return"default";case"cancelled":return"destructive";default:return"secondary"}},Z=s=>{switch(s){case"low":return"secondary";case"normal":return"default";case"high":return"default";case"urgent":return"destructive";default:return"default"}};function Ae({order:s}){const[p,d]=t.useState(!1),[j,m]=t.useState(!1),[o,A]=t.useState(s.status),[g,b]=t.useState(""),[N,C]=t.useState(s.awb_number||""),[f,k]=t.useState(s.tracking_number||""),[v,M]=t.useState(s.shipping_notes||""),B=()=>{d(!0),h.put(route("orders.update-status",s.id),{status:o,notes:g},{onSuccess:()=>{d(!1),b(""),w.fire({title:"Success!",text:"Order status updated successfully",icon:"success",timer:4e3,showConfirmButton:!1})},onError:()=>{d(!1)}})},T=()=>{m(!0),h.put(route("orders.assign-awb",s.id),{awb_number:N||void 0,tracking_number:f,shipping_notes:v},{onSuccess:()=>{m(!1),w.fire({title:"Success!",text:"AWB number assigned successfully",icon:"success",timer:4e3,showConfirmButton:!1})},onError:()=>{m(!1)}})},P=[{title:"Dashboard",href:route("dashboard")},{title:"Orders",href:route("orders.index")},{title:`Order ${s.order_id}`,href:route("orders.show",s.id)}];return e.jsxs(H,{title:`Order ${s.order_id}`,children:[e.jsx(U,{title:`Order ${s.order_id}`}),e.jsxs("div",{className:"space-y-4 pb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(x,{variant:"outline",className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",onClick:()=>h.visit(route("orders.index")),children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Back to Orders"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Order ",s.order_id]}),e.jsxs("p",{className:"text-muted-foreground",children:["Placed on ",c(new Date(s.created_at),"MMM dd, yyyy HH:mm")]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{variant:Y(s.status),className:"text-lg px-4 py-2",children:s.status.charAt(0).toUpperCase()+s.status.slice(1)}),e.jsx(l,{variant:Z(s.order_priority),children:s.order_priority.charAt(0).toUpperCase()+s.order_priority.slice(1)})]})]}),e.jsx($,{breadcrumbs:P})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-md border",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5"}),"Order Items"]})}),e.jsx("div",{className:"p-6",children:e.jsxs(W,{children:[e.jsx(q,{children:e.jsxs(u,{children:[e.jsx(n,{children:"Product"}),e.jsx(n,{children:"Variant"}),e.jsx(n,{children:"Quantity"}),e.jsx(n,{children:"Price"}),e.jsx(n,{children:"Total"})]})}),e.jsx(z,{children:s.cart_items&&s.cart_items.length>0?s.cart_items.map(a=>e.jsxs(u,{children:[e.jsx(i,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.product.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["SKU: ",a.product.slug]})]})}),e.jsx(i,{children:a.product_variant?e.jsxs("div",{children:[e.jsxs("div",{children:["Color: ",a.product_variant.color.name]}),e.jsxs("div",{children:["Size: ",a.product_variant.size.name]}),e.jsxs("div",{children:["SKU: ",a.product_variant.sku]})]}):e.jsx("span",{className:"text-gray-400",children:"No variant"})}),e.jsx(i,{children:a.quantity}),e.jsxs(i,{children:["₹",a.price.toLocaleString()]}),e.jsxs(i,{children:["₹",(a.price*a.quantity).toLocaleString()]})]},a.id)):e.jsx(u,{children:e.jsx(i,{colSpan:5,className:"text-center py-8 text-gray-500",children:"No items in this order"})})})]})})]}),e.jsxs("div",{className:"bg-white rounded-md border",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5"}),"Status History"]})}),e.jsx("div",{className:"p-6",children:s.status_logs&&s.status_logs.length>0?e.jsx("div",{className:"space-y-4",children:s.status_logs.map(a=>e.jsx("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(l,{variant:"outline",children:[a.status_from||"New"," → ",a.status_to]}),e.jsx("span",{className:"text-sm text-gray-500",children:c(new Date(a.changed_at),"MMM dd, yyyy HH:mm")})]}),a.notes&&e.jsx("p",{className:"text-sm text-gray-600",children:a.notes}),a.changed_by&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Changed by: ",a.changed_by.name]})]})},a.id))}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No status history available"})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-md border",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"Customer Information"]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Name"}),e.jsx("p",{className:"font-medium",children:s.customer.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{children:s.customer.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone"}),e.jsx("p",{children:s.customer.phone})]})]})]}),e.jsxs("div",{className:"bg-white rounded-md border",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5"}),"Shipping Address"]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:s.address.address_line_1}),s.address.address_line_2&&e.jsx("p",{children:s.address.address_line_2}),e.jsxs("p",{children:[s.address.city,", ",s.address.state," ",s.address.pincode]}),e.jsx("p",{children:s.address.country})]})})]}),e.jsxs("div",{className:"bg-white rounded-md border",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"Order Summary"]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["₹",s.sub_total.toLocaleString()]})]}),e.jsx(S,{}),e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["₹",s.total_amount.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Payment Method:"}),e.jsx("span",{className:"capitalize",children:s.payment_method})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Payment Status:"}),e.jsx(l,{variant:s.payment_status==="paid"?"default":"secondary",children:s.payment_status.charAt(0).toUpperCase()+s.payment_status.slice(1)})]})]})]}),s.awb_number&&e.jsxs("div",{className:"bg-white rounded-md border",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5"}),"Shipping Information"]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"AWB Number"}),e.jsx("p",{className:"font-mono font-bold",children:s.awb_number})]}),s.tracking_number&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Tracking Number"}),e.jsx("p",{className:"font-mono",children:s.tracking_number})]}),s.shipped_at&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Shipped At"}),e.jsx("p",{children:c(new Date(s.shipped_at),"MMM dd, yyyy HH:mm")})]}),s.delivered_at&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Delivered At"}),e.jsx("p",{children:c(new Date(s.delivered_at),"MMM dd, yyyy HH:mm")})]}),s.shipping_notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Shipping Notes"}),e.jsx("p",{className:"text-sm",children:s.shipping_notes})]})]})]}),e.jsxs("div",{className:"bg-white rounded-md border",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h3",{className:"text-lg font-medium",children:"Quick Actions"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Update Status"}),e.jsxs(I,{value:o,onValueChange:A,children:[e.jsx(L,{children:e.jsx(E,{})}),e.jsxs(V,{className:"bg-white",children:[e.jsx(r,{value:"pending",children:"Pending"}),e.jsx(r,{value:"processing",children:"Processing"}),e.jsx(r,{value:"shipped",children:"Shipped"}),e.jsx(r,{value:"delivered",children:"Delivered"}),e.jsx(r,{value:"cancelled",children:"Cancelled"})]})]}),e.jsx(_,{placeholder:"Add notes (optional)",value:g,onChange:a=>b(a.target.value),rows:2}),e.jsx(x,{onClick:B,variant:"outline",disabled:p||o===s.status,className:"w-full cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",children:p?"Updating...":"Update Status"})]}),e.jsx(S,{}),!s.awb_number&&s.status==="processing"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Assign AWB"}),e.jsx(y,{placeholder:"AWB Number (auto-generated if empty)",value:N,onChange:a=>C(a.target.value)}),e.jsx(y,{placeholder:"Tracking Number (optional)",value:f,onChange:a=>k(a.target.value)}),e.jsx(_,{placeholder:"Shipping Notes (optional)",value:v,onChange:a=>M(a.target.value),rows:2}),e.jsx(x,{variant:"outline",onClick:T,disabled:j,className:"w-full cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",children:j?"Assigning...":"Assign AWB"})]})]})]})]})]})]})}export{Ae as default};
