import{j as e,L as b,S as v}from"./app-8mpgRF_H.js";import{u as y,F as f,a as t,b as n,c as o,d as i,e as l,f as d,o as C,g as N,s as x,h as u,i as w}from"./index-BXEbMwKQ.js";import{u as S,D as _,B as F}from"./DashboardLayout-82tPO0nj.js";import{B as p}from"./button-D7KZE6ws.js";import{I as m}from"./input-C15x56fj.js";import{S as k}from"./switch-CBPMXor5.js";import{S as D,a as B,b as M,c as T,d as h}from"./select-D9NkVbga.js";import{s as A}from"./zod-B98nTOUX.js";import{B as L}from"./breadcrumbs-BQGH-9Zs.js";import{S as V}from"./sweetalert2.esm.all-DGhwgajj.js";import{A as E}from"./arrow-left-Dq_VdZ6f.js";import"./utils-DT8Sk-eS.js";import"./label-aTU67fCD.js";import"./index-xngnoH4f.js";import"./index-CqoyiOMP.js";import"./card-DHAxNADJ.js";import"./shopping-cart-7o6L9-KU.js";import"./log-out-BAw1qoMr.js";import"./index-gxA19zdW.js";import"./index-B6f8qblB.js";import"./Combination-CnZ_Ba2W.js";import"./check-CYkwLoZ3.js";const I=C({code:x().min(3,"Code must be at least 3 characters").max(30,"Code cannot exceed 30 characters").toUpperCase(),type:w(["fixed","percentage"]),value:u.number().min(0,"Value must be at least 0").refine(a=>!0,{message:"Value is required"}),min_spend:u.number().nullable().optional(),max_discount:u.number().nullable().optional(),usage_limit:u.number().int().nullable().optional(),expires_at:x().nullable().optional(),status:N().default(!0)});function oe(){S();const a=y({resolver:A(I),values:{code:"",type:"fixed",value:0,min_spend:null,max_discount:null,usage_limit:null,expires_at:null,status:!0}});function j(s){if(s.type==="percentage"&&s.value>100){a.setError("value",{message:"Percentage discount cannot exceed 100%"});return}const r=new FormData;r.append("code",s.code),r.append("type",s.type),r.append("value",s.value.toString()),s.min_spend!=null&&r.append("min_spend",s.min_spend.toString()),s.max_discount!=null&&r.append("max_discount",s.max_discount.toString()),s.usage_limit!=null&&r.append("usage_limit",s.usage_limit.toString()),s.expires_at&&r.append("expires_at",s.expires_at),r.append("status",s.status?"1":"0"),v.post(route("coupons.store"),r,{onSuccess:()=>{V.fire({title:"Success!",text:`${s.code} has been created successfully.`,icon:"success",timer:4e3,showConfirmButton:!1})}})}const g=[{title:"Dashboard",href:route("dashboard")},{title:"Coupons",href:route("coupons.index")},{title:"Add Coupon",href:route("coupons.create")}];return e.jsxs(_,{title:"Create Coupon",children:[e.jsx(b,{title:"Create Coupon"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4 pb-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Create Coupon"}),e.jsx("p",{className:"text-muted-foreground",children:"Add a new discount coupon to your store"}),e.jsx("div",{className:"flex items-center mb-2 justify-end",children:e.jsxs(p,{variant:"outline",onClick:()=>window.history.back(),className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",size:"sm",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Back to Coupons"]})}),e.jsx(L,{breadcrumbs:g})]}),e.jsx("div",{className:"bg-white rounded-md shadow-lg border border-gray-100 p-6",children:e.jsx("div",{className:"md:col-span-1",children:e.jsxs("div",{className:"rounded-lg border bg-card text-card-foreground shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:e.jsx(F,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:"Coupon Details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure your discount coupon"})]})]}),e.jsx(f,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(j),className:"space-y-6",children:[e.jsx(t,{control:a.control,name:"code",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Coupon Code"}),e.jsx(i,{children:e.jsx(m,{...s,placeholder:"SUMMER20",onChange:r=>s.onChange(r.target.value.toUpperCase())})}),e.jsx(l,{children:"Enter a unique code customers will use to apply the discount."}),e.jsx(d,{})]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(t,{control:a.control,name:"type",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Type"}),e.jsxs(D,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(i,{children:e.jsx(B,{className:"bg-white border border-gray-300 rounded-md shadow-sm",children:e.jsx(M,{placeholder:"Select type"})})}),e.jsxs(T,{className:"bg-white border border-gray-300 rounded-md shadow-lg",children:[e.jsx(h,{value:"percentage",children:"Percentage"}),e.jsx(h,{value:"fixed",children:"Fixed Amount"})]})]}),e.jsx(l,{children:"How the discount will be applied"}),e.jsx(d,{})]})}),e.jsx(t,{control:a.control,name:"value",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Value"}),e.jsx(i,{children:e.jsxs("div",{className:"relative",children:[e.jsx(m,{type:"number",min:"0",step:a.watch("type")==="percentage"?"1":"0.01",...s,placeholder:a.watch("type")==="percentage"?"10":"5.00"}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:a.watch("type")==="percentage"?"%":"₹"})]})}),e.jsx(l,{children:a.watch("type")==="percentage"?"Percentage discount to apply (1-100)":"Fixed amount to deduct from the order"}),e.jsx(d,{})]})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(t,{control:a.control,name:"min_spend",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Minimum Spend"}),e.jsx(i,{children:e.jsxs("div",{className:"relative",children:[e.jsx(m,{type:"number",min:"0",step:"0.01",...s,value:s.value===null?"":s.value,onChange:r=>{const c=r.target.value===""?null:parseFloat(r.target.value);s.onChange(c)},placeholder:"0.00"}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:"₹"})]})}),e.jsx(l,{children:"Minimum order amount required (optional)"}),e.jsx(d,{})]})}),e.jsx(t,{control:a.control,name:"max_discount",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Maximum Discount"}),e.jsx(i,{children:e.jsxs("div",{className:"relative",children:[e.jsx(m,{type:"number",min:"0",step:"0.01",...s,value:s.value===null?"":s.value,onChange:r=>{const c=r.target.value===""?null:parseFloat(r.target.value);s.onChange(c)},placeholder:"0.00"}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:"₹"})]})}),e.jsx(l,{children:"Maximum discount amount (optional)"}),e.jsx(d,{})]})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(t,{control:a.control,name:"usage_limit",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Usage Limit"}),e.jsx(i,{children:e.jsx(m,{type:"number",min:"1",step:"1",...s,value:s.value===null?"":s.value,onChange:r=>{const c=r.target.value===""?null:parseInt(r.target.value);s.onChange(c)},placeholder:"Unlimited"})}),e.jsx(l,{children:"How many times this coupon can be used (optional)"}),e.jsx(d,{})]})}),e.jsx(t,{control:a.control,name:"expires_at",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Expiry Date"}),e.jsx(i,{children:e.jsx(m,{type:"datetime-local",...s,value:s.value||"",onChange:r=>{const c=r.target.value===""?null:r.target.value;s.onChange(c)}})}),e.jsx(l,{children:"When this coupon expires (optional)"}),e.jsx(d,{})]})})]}),e.jsx(t,{control:a.control,name:"status",render:({field:s})=>e.jsxs(n,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(o,{className:"text-base",children:"Active"}),e.jsx(l,{children:"Coupon will be immediately available for use"})]}),e.jsx(i,{children:e.jsx(k,{checked:s.value,onCheckedChange:s.onChange})})]})}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(p,{type:"button",variant:"outline",className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",onClick:()=>window.history.back(),children:"Cancel"}),e.jsx(p,{type:"submit",variant:"outline",className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",disabled:a.formState.isSubmitting,children:a.formState.isSubmitting?"Creating...":"Create Coupon"})]})]})})]})})})]})]})}export{oe as default};
