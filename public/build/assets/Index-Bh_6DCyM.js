import{r as H,j as e,L as U,S as n}from"./app-t00vz8yk.js";import{D as V}from"./DashboardLayout-1MrkR7-7.js";import{B as i}from"./button-DOrDzDwb.js";import{I as y}from"./input-CtOztckE.js";import{L as p}from"./label-B4_iYcyS.js";import{S as w,a as S,b as _,c as A,d as f}from"./select-Brvg9uuv.js";import{B as T}from"./badge-skWHhfzJ.js";import{C as o,a as d,b as m,c as x,d as q}from"./card-DxILUFZ5.js";import{T as z,a as O,b as F,c as l,d as P,e as a}from"./table-C5xvP0Q_.js";import{D as X}from"./download-C9ZNKb5u.js";import{C as R}from"./circle-alert-DQp1glWf.js";import{C as N}from"./clock--AfF1FlV.js";import{C as v}from"./circle-check-big-DyudUJkX.js";import{F as G}from"./filter-9fb0FTWT.js";import{E as J}from"./eye-CKV992HX.js";import{C as g}from"./circle-x-dxTk8sXT.js";import{f as K}from"./format-CBpsKyOP.js";import"./index-6Ovb7Dg4.js";import"./utils-BVps5BK6.js";import"./index-BWhO1Zcs.js";import"./sweetalert2.esm.all-DGhwgajj.js";import"./user-BQgx5HQE.js";import"./shopping-cart-CpEA-Iqs.js";import"./log-out-Bh5ug1nn.js";import"./index-B9bkS0MZ.js";import"./index-BOxGpJ-a.js";import"./Combination-Iccp121O.js";import"./check-BfeD7bNG.js";const Q={pending:"bg-yellow-100 text-yellow-800",approved:"bg-blue-100 text-blue-800",rejected:"bg-red-100 text-red-800",processing:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"},W={pending:N,approved:v,rejected:g,processing:R,completed:v,failed:g,cancelled:g};function _e({refunds:t,filters:I,statusOptions:L,refundTypeOptions:M,statistics:j}){const[h,b]=H.useState(I),u=(s,r)=>{b(c=>({...c,[s]:r==="all"?"":r}))},k=()=>{n.get(route("refunds.index"),h,{preserveState:!0,replace:!0})},B=()=>{b({}),n.get(route("refunds.index"),{},{preserveState:!0,replace:!0})},D=s=>{const r=W[s]||N;return e.jsx(r,{className:"h-4 w-4"})},E=s=>{var r,c;return s.customer?s.customer:(r=s.sale)!=null&&r.customer?s.sale.customer:(c=s.order)!=null&&c.customer?s.order.customer:{name:"N/A",email:"N/A"}},$=s=>s.sale?`Sale #${s.sale.id}`:s.order?`Order #${s.order.id}`:"N/A";return e.jsxs(V,{title:"Refund Management",children:[e.jsx(U,{title:"Refund Management"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Refund Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage customer refund requests and process refunds"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{variant:"outline",onClick:()=>n.get(route("refunds.export")),children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsx(i,{onClick:()=>n.get(route("refunds.create")),children:"Create Refund"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(o,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Total Refunds"}),e.jsx(R,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(x,{children:e.jsx("div",{className:"text-2xl font-bold",children:j.total_refunds})})]}),e.jsxs(o,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Pending"}),e.jsx(N,{className:"h-4 w-4 text-yellow-500"})]}),e.jsx(x,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:j.pending_refunds})})]}),e.jsxs(o,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Completed"}),e.jsx(v,{className:"h-4 w-4 text-green-500"})]}),e.jsx(x,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:j.completed_refunds})})]}),e.jsxs(o,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Total Amount"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"₹"})]}),e.jsx(x,{children:e.jsxs("div",{className:"text-2xl font-bold",children:["₹",j.total_refunded_amount.toLocaleString()]})})]})]}),e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(m,{children:"Filters"})}),e.jsxs(x,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"status",children:"Status"}),e.jsxs(w,{value:h.status||"",onValueChange:s=>u("status",s),children:[e.jsx(S,{children:e.jsx(_,{placeholder:"All Statuses"})}),e.jsxs(A,{className:"bg-white",children:[e.jsx(f,{value:"all",children:"All Statuses"}),L.map(s=>e.jsx(f,{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))]})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"refund_type",children:"Refund Type"}),e.jsxs(w,{value:h.refund_type||"",onValueChange:s=>u("refund_type",s),children:[e.jsx(S,{children:e.jsx(_,{placeholder:"All Types"})}),e.jsxs(A,{className:"bg-white",children:[e.jsx(f,{value:"all",children:"All Types"}),M.map(s=>e.jsx(f,{value:s,children:s.replace("_"," ").charAt(0).toUpperCase()+s.replace("_"," ").slice(1)},s))]})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"customer_search",children:"Customer"}),e.jsx(y,{id:"customer_search",placeholder:"Search by name, email, or phone",value:h.customer_search||"",onChange:s=>u("customer_search",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"reference",children:"Reference"}),e.jsx(y,{id:"reference",placeholder:"Refund reference",value:h.reference||"",onChange:s=>u("reference",s.target.value)})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(i,{className:"cursor-pointer",onClick:k,children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Apply Filters"]}),e.jsx(i,{className:"cursor-pointer",variant:"outline",onClick:B,children:"Clear Filters"})]})]})]}),e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(m,{children:"Refunds"}),e.jsx(q,{children:"A list of all refund requests and their current status"})]}),e.jsxs(x,{children:[e.jsxs(z,{children:[e.jsx(O,{children:e.jsxs(F,{children:[e.jsx(l,{children:"Reference"}),e.jsx(l,{children:"Customer"}),e.jsx(l,{children:"Source"}),e.jsx(l,{children:"Amount"}),e.jsx(l,{children:"Method"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Created"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(P,{children:t.data.map(s=>{var C;const r=E(s),c=$(s);return e.jsxs(F,{children:[e.jsx(a,{className:"font-medium",children:s.reference}),e.jsx(a,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:r.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:r.email})]})}),e.jsx(a,{children:c}),e.jsxs(a,{children:["₹",s.amount.toLocaleString()]}),e.jsx(a,{children:e.jsx(T,{variant:"outline",children:((C=s.method)==null?void 0:C.replace("_"," ").toUpperCase())||"N/A"})}),e.jsx(a,{children:e.jsx(T,{className:Q[s.status],children:e.jsxs("span",{className:"flex items-center gap-1",children:[D(s.status),s.status.charAt(0).toUpperCase()+s.status.slice(1)]})})}),e.jsx(a,{children:K(new Date(s.created_at),"MMM dd, yyyy")}),e.jsx(a,{children:e.jsx("div",{className:"flex gap-2",children:e.jsx(i,{variant:"outline",className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",size:"sm",onClick:()=>n.get(route("refunds.show",s.id)),children:e.jsx(J,{className:"h-4 w-4"})})})})]},s.id)})})]}),t.links&&t.meta&&e.jsxs("div",{className:"flex items-center justify-between space-x-2 py-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:t.meta.total>0?`Showing ${t.meta.from} to ${t.meta.to} of ${t.meta.total} results`:"No refund records found."}),e.jsx("div",{className:"flex space-x-2",children:t.links.map((s,r)=>e.jsx(i,{variant:s.active?"default":"outline",size:"sm",onClick:()=>s.url&&n.get(s.url),disabled:!s.url,children:e.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})},r))})]}),(!t.meta||t.meta.total===0)&&e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No refund records found."})]})]})]})]})}export{_e as default};
