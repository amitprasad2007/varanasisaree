import{r as t,j as e,L as P,S as x}from"./app-CSGsXN2_.js";import{D as H,M as O}from"./DashboardLayout-Cm7fWHDc.js";import{B as h}from"./button-CpHgoeej.js";import{I as y}from"./input-4EoAJ2sF.js";import{S as D,a as I,b as L,c as E,d as r}from"./select-C-oMmQHE.js";import{B as l}from"./badge-yjkeAiUG.js";import{T as V,a as W,b as u,c as n,d as q,e as i}from"./table-cepL7F61.js";import{T as S}from"./textarea-B4TRFfIG.js";import{S as w}from"./separator-IXMKypHT.js";import{B as z}from"./breadcrumbs-LLgRkcqE.js";import{S as _}from"./sweetalert2.esm.all-DGhwgajj.js";import{A as $}from"./arrow-left-BQw96GW4.js";import{P as K}from"./package-i8_Er7pX.js";import{U as Q}from"./user-d7lXj7p_.js";import{M as R}from"./map-pin-DJSdOx9-.js";import{C as F}from"./credit-card-Doo59LFu.js";import{T as G}from"./truck-CKsYCu3N.js";import{f as c}from"./format-CBpsKyOP.js";import"./index-CLPvigs0.js";import"./utils-CBONDciz.js";import"./index-CtLLpabt.js";import"./card-BP32WA0n.js";import"./shopping-cart-C7Jx4JUS.js";import"./log-out-0xslMiQr.js";import"./index-BgxWFZR-.js";import"./index-BJ4qj4YU.js";import"./Combination-w187tfM_.js";import"./check-SvmpdFfI.js";const J=s=>{switch(s){case"pending":return"secondary";case"processing":return"default";case"shipped":return"default";case"delivered":return"default";case"cancelled":return"destructive";default:return"secondary"}},X=s=>{switch(s){case"low":return"secondary";case"normal":return"default";case"high":return"default";case"urgent":return"destructive";default:return"default"}};function Ae({order:s}){const[p,d]=t.useState(!1),[j,m]=t.useState(!1),[o,A]=t.useState(s.status),[g,b]=t.useState(""),[N,C]=t.useState(s.awb_number||""),[f,k]=t.useState(s.tracking_number||""),[v,B]=t.useState(s.shipping_notes||""),M=()=>{d(!0),x.put(route("orders.update-status",s.id),{status:o,notes:g},{onSuccess:()=>{d(!1),b(""),_.fire({title:"Success!",text:"Order status updated successfully",icon:"success",timer:4e3,showConfirmButton:!1})},onError:()=>{d(!1)}})},T=()=>{m(!0),x.put(route("orders.assign-awb",s.id),{awb_number:N||void 0,tracking_number:f,shipping_notes:v},{onSuccess:()=>{m(!1),_.fire({title:"Success!",text:"AWB number assigned successfully",icon:"success",timer:4e3,showConfirmButton:!1})},onError:()=>{m(!1)}})},U=[{title:"Dashboard",href:route("dashboard")},{title:"Orders",href:route("orders.index")},{title:`Order ${s.order_id}`,href:route("orders.show",s.id)}];return e.jsxs(H,{title:`Order ${s.order_id}`,children:[e.jsx(P,{title:`Order ${s.order_id}`}),e.jsxs("div",{className:"space-y-4 pb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(h,{variant:"outline",className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",onClick:()=>x.visit(route("orders.index")),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Back to Orders"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Order ",s.order_id]}),e.jsxs("p",{className:"text-muted-foreground",children:["Placed on ",c(new Date(s.created_at),"MMM dd, yyyy HH:mm")]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{variant:J(s.status),className:"text-lg px-4 py-2",children:s.status.charAt(0).toUpperCase()+s.status.slice(1)}),e.jsx(l,{variant:X(s.order_priority),children:s.order_priority.charAt(0).toUpperCase()+s.order_priority.slice(1)})]})]}),e.jsx(z,{breadcrumbs:U})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-md border",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),"Order Items"]})}),e.jsx("div",{className:"p-6",children:e.jsxs(V,{children:[e.jsx(W,{children:e.jsxs(u,{children:[e.jsx(n,{children:"Product"}),e.jsx(n,{children:"Variant"}),e.jsx(n,{children:"Quantity"}),e.jsx(n,{children:"Price"}),e.jsx(n,{children:"Total"})]})}),e.jsx(q,{children:s.cart_items&&s.cart_items.length>0?s.cart_items.map(a=>e.jsxs(u,{children:[e.jsx(i,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.product.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["SKU: ",a.product.slug]})]})}),e.jsx(i,{children:a.product_variant?e.jsxs("div",{children:[e.jsxs("div",{children:["Color: ",a.product_variant.color.name]}),e.jsxs("div",{children:["Size: ",a.product_variant.size.name]}),e.jsxs("div",{children:["SKU: ",a.product_variant.sku]})]}):e.jsx("span",{className:"text-gray-400",children:"No variant"})}),e.jsx(i,{children:a.quantity}),e.jsxs(i,{children:["₹",a.price.toLocaleString()]}),e.jsxs(i,{children:["₹",(a.price*a.quantity).toLocaleString()]})]},a.id)):e.jsx(u,{children:e.jsx(i,{colSpan:5,className:"text-center py-8 text-gray-500",children:"No items in this order"})})})]})})]}),e.jsxs("div",{className:"bg-white rounded-md border",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5"}),"Status History"]})}),e.jsx("div",{className:"p-6",children:s.status_logs&&s.status_logs.length>0?e.jsx("div",{className:"space-y-4",children:s.status_logs.map(a=>e.jsx("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(l,{variant:"outline",children:[a.status_from||"New"," → ",a.status_to]}),e.jsx("span",{className:"text-sm text-gray-500",children:c(new Date(a.changed_at),"MMM dd, yyyy HH:mm")})]}),a.notes&&e.jsx("p",{className:"text-sm text-gray-600",children:a.notes}),a.changed_by&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Changed by: ",a.changed_by.name]})]})},a.id))}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No status history available"})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-md border",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5"}),"Customer Information"]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Name"}),e.jsx("p",{className:"font-medium",children:s.customer.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{children:s.customer.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone"}),e.jsx("p",{children:s.customer.phone})]})]})]}),e.jsxs("div",{className:"bg-white rounded-md border",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5"}),"Shipping Address"]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:s.address.address_line_1}),s.address.address_line_2&&e.jsx("p",{children:s.address.address_line_2}),e.jsxs("p",{children:[s.address.city,", ",s.address.state," ",s.address.pincode]}),e.jsx("p",{children:s.address.country})]})})]}),e.jsxs("div",{className:"bg-white rounded-md border",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"Order Summary"]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["₹",s.sub_total.toLocaleString()]})]}),e.jsx(w,{}),e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["₹",s.total_amount.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Payment Method:"}),e.jsx("span",{className:"capitalize",children:s.payment_method})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Payment Status:"}),e.jsx(l,{variant:s.payment_status==="paid"?"default":"secondary",children:s.payment_status.charAt(0).toUpperCase()+s.payment_status.slice(1)})]})]})]}),s.awb_number&&e.jsxs("div",{className:"bg-white rounded-md border",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5"}),"Shipping Information"]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"AWB Number"}),e.jsx("p",{className:"font-mono font-bold",children:s.awb_number})]}),s.tracking_number&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Tracking Number"}),e.jsx("p",{className:"font-mono",children:s.tracking_number})]}),s.shipped_at&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Shipped At"}),e.jsx("p",{children:c(new Date(s.shipped_at),"MMM dd, yyyy HH:mm")})]}),s.delivered_at&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Delivered At"}),e.jsx("p",{children:c(new Date(s.delivered_at),"MMM dd, yyyy HH:mm")})]}),s.shipping_notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Shipping Notes"}),e.jsx("p",{className:"text-sm",children:s.shipping_notes})]})]})]}),e.jsxs("div",{className:"bg-white rounded-md border",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h3",{className:"text-lg font-medium",children:"Quick Actions"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Update Status"}),e.jsxs(D,{value:o,onValueChange:A,children:[e.jsx(I,{children:e.jsx(L,{})}),e.jsxs(E,{className:"bg-white",children:[e.jsx(r,{value:"pending",children:"Pending"}),e.jsx(r,{value:"processing",children:"Processing"}),e.jsx(r,{value:"shipped",children:"Shipped"}),e.jsx(r,{value:"delivered",children:"Delivered"}),e.jsx(r,{value:"cancelled",children:"Cancelled"})]})]}),e.jsx(S,{placeholder:"Add notes (optional)",value:g,onChange:a=>b(a.target.value),rows:2}),e.jsx(h,{onClick:M,variant:"outline",disabled:p||o===s.status,className:"w-full cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",children:p?"Updating...":"Update Status"})]}),e.jsx(w,{}),!s.awb_number&&s.status==="processing"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Assign AWB"}),e.jsx(y,{placeholder:"AWB Number (auto-generated if empty)",value:N,onChange:a=>C(a.target.value)}),e.jsx(y,{placeholder:"Tracking Number (optional)",value:f,onChange:a=>k(a.target.value)}),e.jsx(S,{placeholder:"Shipping Notes (optional)",value:v,onChange:a=>B(a.target.value),rows:2}),e.jsx(h,{variant:"outline",onClick:T,disabled:j,className:"w-full cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",children:j?"Assigning...":"Assign AWB"})]})]})]})]})]})]})}export{Ae as default};
