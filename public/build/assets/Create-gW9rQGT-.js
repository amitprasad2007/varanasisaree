import{r as j,m as I,j as e,$ as C}from"./app-DpbhamJZ.js";import{D as S,X as k}from"./DashboardLayout-Aw7i6mvF.js";import{B as p}from"./button-D7hhLjEI.js";import{I as A}from"./input-dlafkF9T.js";import{L as v}from"./label-z1Ck5vc7.js";import{C as P}from"./checkbox-WE8B7_8D.js";import{B as F}from"./breadcrumbs-q1IpMdKq.js";import{S as B}from"./sweetalert2.esm.all-DGhwgajj.js";import{A as E}from"./arrow-left-4ehmlERi.js";import{U as R}from"./upload-DWIGMT7Z.js";import"./index-B2SICFGd.js";import"./utils-C2L-VftL.js";import"./index-BlhaG_3f.js";import"./index-Bg0fErXS.js";import"./check-B-_BevLp.js";function W({product:a}){const[h,g]=j.useState([]),u=j.useRef(null),{data:i,setData:l,post:b,processing:x,errors:m,clearErrors:f}=I({images:[],alt_text:"",is_primary:!1}),y=r=>{const s=Array.from(r.target.files||[]);if(s.length===0)return;l("images",s),f("images");const t=[];s.forEach(o=>{const c=new FileReader;c.onload=d=>{var n;(n=d.target)!=null&&n.result&&(t.push(d.target.result),t.length===s.length&&g(t))},c.readAsDataURL(o)})},N=r=>{const s=[...i.images];s.splice(r,1);const t=[...h];t.splice(r,1),l("images",s),g(t)},w=r=>{r.preventDefault();const s=Array.from(r.dataTransfer.files);if(s.length===0)return;l("images",s),f("images");const t=[];s.forEach(o=>{const c=new FileReader;c.onload=d=>{var n;(n=d.target)!=null&&n.result&&(t.push(d.target.result),t.length===s.length&&g(t))},c.readAsDataURL(o)})},D=r=>{r.preventDefault();const s=new FormData;i.images.forEach((t,o)=>{s.append(`images[${o}]`,t)}),s.append("alt_text",i.alt_text),s.append("is_primary",i.is_primary?"1":"0"),b(route("product-images.store",a.id),{method:"post",...Object.fromEntries(s),onSuccess:()=>{B.fire({title:"Success!",text:"Images added successfully",icon:"success",timer:4e3,showConfirmButton:!1})}})},_=[{title:"Dashboard",href:route("dashboard")},{title:"Product",href:route("products.index")},{title:"Show Product",href:route("products.show",a.id)},{title:"Product Image",href:route("product-images.index",a.id)},{title:"Add Image",href:route("product-images.create",a.id)}];return e.jsx(S,{title:`${a.name} - Add Images`,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4 pb-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Upload Images"}),e.jsxs("p",{className:"text-muted-foreground",children:["Add images for ",a.name]})]}),e.jsx(p,{variant:"outline",asChild:!0,children:e.jsxs(C,{href:route("product-images.index",a.id),children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Back to Images"]})})]}),e.jsx(F,{breadcrumbs:_})]}),e.jsx("div",{className:"bg-white rounded-md shadow-lg border border-gray-400 p-6",children:e.jsx("form",{onSubmit:D,className:"space-y-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-12 text-center cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors",onClick:()=>{var r;return(r=u.current)==null?void 0:r.click()},onDragOver:r=>r.preventDefault(),onDrop:w,children:[e.jsx("input",{ref:u,type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:y}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx(R,{className:"h-10 w-10 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium",children:"Drag & drop image files"}),e.jsx("p",{className:"text-muted-foreground",children:"or click to browse (JPG, PNG, GIF up to 2MB)"}),e.jsx(p,{type:"button",variant:"outline",className:"mt-2",children:"Select Files"})]})]}),m.images&&e.jsx("div",{className:"text-sm text-red-500",children:m.images}),h.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Selected Images"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:h.map((r,s)=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"relative aspect-square overflow-hidden rounded-md border bg-gray-50",children:e.jsx("img",{src:r,alt:`Preview ${s+1}`,className:"h-full w-full object-cover transition-all group-hover:scale-105"})}),e.jsx("button",{type:"button",onClick:()=>N(s),className:"absolute -top-2 -right-2 bg-white rounded-full p-1 shadow hover:bg-gray-100",children:e.jsx(k,{className:"h-4 w-4"})})]},s))})]}),e.jsxs("div",{className:"grid gap-6 grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"alt_text",children:"Alt Text"}),e.jsx(A,{id:"alt_text",value:i.alt_text,onChange:r=>l("alt_text",r.target.value),placeholder:"Describe the image for accessibility"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Helps with accessibility and SEO"}),m.alt_text&&e.jsx("p",{className:"text-sm text-red-500",children:m.alt_text})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{id:"is_primary",checked:i.is_primary,onCheckedChange:r=>l("is_primary",!!r)}),e.jsx(v,{htmlFor:"is_primary",children:"Set as primary image"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(p,{type:"submit",variant:"outline",disabled:x||i.images.length===0,className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",children:x?"Uploading...":"Upload Images"})})]})})})]})})}export{W as default};
