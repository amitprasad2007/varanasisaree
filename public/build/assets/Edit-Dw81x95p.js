import{m as v,j as e,L as g,$ as w}from"./index.esm-Bc_4NMHb.js";import{D as N}from"./DashboardLayout-BDCGVe1w.js";import{B as n}from"./button-BGQ3eGlv.js";import{I as o}from"./input-C5Rq1bdp.js";import{L as t}from"./label-Bf6AiYvT.js";import{C as c}from"./checkbox-CASnfcB2.js";import{B as y}from"./breadcrumbs-fQMyfklW.js";import{S as _}from"./sweetalert2.esm.all-DGhwgajj.js";import{A as k}from"./arrow-left-CF2BqPGQ.js";import"./dashboard-DiRicu7v.js";import"./utils-D0xr-SEQ.js";import"./index-wy8baEd3.js";import"./index-BWaccMhK.js";import"./index-BW5lKf9d.js";import"./createLucideIcon-C4cwkqtv.js";import"./index-DaD-7RND.js";import"./check-xufIyZ2m.js";function H({user:a,roles:x,permissions:p}){const{data:r,setData:d,put:h,processing:j,errors:i}=v({name:a.name,email:a.email,password:"",role_ids:a.roles.map(s=>s.id),permission_ids:(a.permissions??[]).map(s=>s.id)}),u=s=>{s.preventDefault(),h(route("users.update",a.id),{onSuccess:()=>{_.fire({title:"Success!",text:"User updated successfully.",icon:"success"})}})},f=[{title:"Dashboard",href:route("dashboard")},{title:"User Management",href:route("users.index")},{title:"Edit User",href:route("users.edit",a.id)}];return e.jsxs(N,{title:"Edit User",children:[e.jsx(g,{title:"Edit User"}),e.jsxs("div",{className:"space-y-4 pb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Edit User"}),e.jsx(w,{href:route("users.index"),children:e.jsxs(n,{className:"flex items-center gap-2 bg-primary cursor-pointer hover:bg-gray-100 text-black shadow-sm",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Back to User Management"]})})]}),e.jsx(y,{breadcrumbs:f}),e.jsx("form",{onSubmit:u,className:"max-w-2xl bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"name",children:"Name"}),e.jsx(o,{id:"name",type:"text",value:r.name,onChange:s=>d("name",s.target.value)}),i.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.name})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Direct Permissions"}),e.jsx("div",{className:"mt-2 space-y-2",children:p.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{id:`permission-${s.id}`,checked:(r.permission_ids??[]).includes(s.id),onCheckedChange:l=>{const m=r.permission_ids??[];d("permission_ids",l?[...m,s.id]:m.filter(b=>b!==s.id))}}),e.jsx(t,{htmlFor:`permission-${s.id}`,children:s.name})]},s.id))}),i.permission_ids&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.permission_ids})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"email",children:"Email"}),e.jsx(o,{id:"email",type:"email",value:r.email,onChange:s=>d("email",s.target.value)}),i.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.email})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"password",children:"Password (leave blank to keep current)"}),e.jsx(o,{id:"password",type:"password",value:r.password,onChange:s=>d("password",s.target.value)}),i.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.password})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Roles"}),e.jsx("div",{className:"mt-2 space-y-2",children:x.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{id:`role-${s.id}`,checked:r.role_ids.includes(s.id),onCheckedChange:l=>{d("role_ids",l?[...r.role_ids,s.id]:r.role_ids.filter(m=>m!==s.id))}}),e.jsx(t,{htmlFor:`role-${s.id}`,children:s.name})]},s.id))}),i.role_ids&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.role_ids})]}),e.jsx(n,{type:"submit",className:"flex items-center gap-2 bg-primary cursor-pointer hover:bg-gray-100 text-black shadow-sm",disabled:j,children:"Update User"})]})})]})]})}export{H as default};
