import{r as w,m as y,j as e,L as C,$ as _}from"./app-BhMdcSKk.js";import{D as F}from"./DashboardLayout-VUd8GCFO.js";import{B as c}from"./button-DYod8FMN.js";import{I as o}from"./input-CF6rFMmE.js";import{L as i}from"./label-DOWjtVNv.js";import{C as x}from"./checkbox-DbSUa7lQ.js";import{A as k,a as U,b as A}from"./avatar-j08HMxfM.js";import{B as D}from"./breadcrumbs-B_bLveUO.js";import{S as h}from"./sweetalert2.all-COREgisr.js";import{A as L}from"./arrow-left-D2nEWCcE.js";import"./index-0PyNE_9H.js";import"./utils-BngjJv30.js";import"./index-Cq-R6i0j.js";import"./index-NaCJ5V_9.js";import"./check-D_M5d7Gl.js";function Q({roles:p,permissions:j}){const[m,u]=w.useState(null),{data:a,setData:d,post:f,processing:v,errors:r}=y({name:"",email:"",password:"",phone:"",address:"",avatar:null,role_ids:[],permission_ids:[]}),g=s=>{s.preventDefault(),f(route("users.store"),{forceFormData:!0,onSuccess:()=>{h.fire({title:"Success",text:"User created successfully.",icon:"success"})},onError:()=>{h.fire({title:"Error",text:"Please correct the highlighted errors.",icon:"error"})}})},b=s=>{var l;const t=(l=s.target.files)==null?void 0:l[0];if(t){d("avatar",t);const n=new FileReader;n.onloadend=()=>{u(n.result)},n.readAsDataURL(t)}},N=[{title:"Dashboard",href:route("dashboard")},{title:"User Management",href:route("users.index")},{title:"Create User",href:route("users.create")}];return e.jsxs(F,{title:"Create New User",children:[e.jsx(C,{title:"Create User"}),e.jsxs("div",{className:"space-y-4 pb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Create New User"}),e.jsx(_,{href:route("users.index"),children:e.jsxs(c,{className:"flex items-center gap-2 bg-primary cursor-pointer hover:bg-gray-100 text-black shadow-sm",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Back to User Management"]})})]}),e.jsx(D,{breadcrumbs:N}),e.jsxs("form",{onSubmit:g,className:"max-w-2xl bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"h-24 w-24 cursor-pointer",children:m?e.jsx(U,{src:m,alt:"Preview"}):e.jsx(A,{className:"text-gray-500 text-sm font-bold border border-gray-300",children:"Upload"})}),e.jsx(o,{type:"file",className:"absolute inset-0 opacity-0 cursor-pointer hover:bg-gray-100 text-black shadow-sm",onChange:b,accept:"image/*"})]})}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"name",children:"Name"}),e.jsx(o,{id:"name",type:"text",value:a.name,onChange:s=>d("name",s.target.value)}),r.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.name})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"email",children:"Email"}),e.jsx(o,{id:"email",type:"email",value:a.email,onChange:s=>d("email",s.target.value)}),r.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.email})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"password",children:"Password"}),e.jsx(o,{id:"password",type:"password",value:a.password,onChange:s=>d("password",s.target.value)}),r.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.password})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"phone",children:"Mobile"}),e.jsx(o,{id:"phone",type:"tel",value:a.phone,onChange:s=>d("phone",s.target.value)}),r.phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.phone})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"address",children:"Address"}),e.jsx(o,{id:"address",type:"text",value:a.address,onChange:s=>d("address",s.target.value)}),r.address&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.address})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Roles"}),e.jsx("div",{className:"mt-2 space-y-2",children:p.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{id:`role-${s.id}`,checked:a.role_ids.includes(s.id),onCheckedChange:t=>{d("role_ids",t?[...a.role_ids,s.id]:a.role_ids.filter(l=>l!==s.id))}}),e.jsx(i,{htmlFor:`role-${s.id}`,children:s.name}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",(s.permissions??[]).map(t=>t.name).join(", "),")"]})]},s.id))}),r.role_ids&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.role_ids})]}),e.jsx(c,{type:"submit",className:"flex items-center gap-2 bg-primary cursor-pointer hover:bg-gray-100 text-black shadow-sm",disabled:v,children:"Create User"})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Direct Permissions"}),e.jsx("div",{className:"mt-2 space-y-2",children:j.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{id:`permission-${s.id}`,checked:(a.permission_ids??[]).includes(s.id),onCheckedChange:t=>{const l=a.permission_ids??[];d("permission_ids",t?[...l,s.id]:l.filter(n=>n!==s.id))}}),e.jsx(i,{htmlFor:`permission-${s.id}`,children:s.name})]},s.id))}),r.permission_ids&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.permission_ids})]})]})]})]})}export{Q as default};
