import{r as C,m as D,j as e,L as P,$ as S,S as _}from"./app-uAdQgTs8.js";import{D as w}from"./DashboardLayout-DfHjR-E3.js";import{B as t}from"./button-Bb0dxY43.js";import{T,a as A,b as x,c as r,d as B,e as i}from"./table-CX32Ym3r.js";import{D as I,a as L,b as O,c as $,d as k}from"./dialog-CwJeINPp.js";import{S as R,a as H,b as E,c as F,d as V}from"./select-Dd6K6OvF.js";import{L as j}from"./label-DaIKQcgy.js";import{I as z}from"./input-xk17Qy7U.js";import{B as M}from"./breadcrumbs-DRPsoT0k.js";import"./index-DLvvQ_1D.js";import"./utils-BGMc812E.js";import"./index-W-PvzrYH.js";import"./sweetalert2.esm.all-DGhwgajj.js";import"./card-Xi4sK9zb.js";import"./log-out-W70Bistv.js";import"./index-mvnBeJph.js";import"./Combination-C2QncYrU.js";import"./index-CWFYX-ZO.js";import"./index-Dsc5EKnT.js";import"./check-Zw8XTWPm.js";function ne({collection:a,collectionProducts:d,availableProducts:p}){const[u,l]=C.useState(!1),{data:o,setData:c,post:g,processing:b,reset:f}=D({product_id:"",display_order:0}),v=s=>{s.preventDefault(),g(route("collections.addProduct",{collection:a.id}),{onSuccess:()=>{l(!1),f()}})},y=s=>{confirm("Are you sure you want to remove this product from the collection?")&&_.delete(route("collections.removeProduct",{collection:a.id,product:s}))},N=[{title:"Dashboard",href:route("dashboard")},{title:"Collections",href:route("collections.index")},{title:"Collections Product",href:route("collections.products",{collection:a.id})}];return e.jsxs(w,{title:"Collections - Product",children:[e.jsx(P,{title:`${a.name} - Products`}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(S,{href:route("collections.index"),children:e.jsx(t,{variant:"outline",children:"← Back to Collections"})}),e.jsx(M,{breadcrumbs:N})]}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:a.name}),e.jsx("p",{className:"text-gray-600",children:"Manage products in this collection"})]}),e.jsxs(I,{open:u,onOpenChange:l,children:[e.jsx(L,{asChild:!0,children:e.jsx(t,{children:"Add Product"})}),e.jsxs(O,{className:"max-w-2xl bg-white",children:[e.jsx($,{children:e.jsx(k,{children:"Add Product to Collection"})}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"product_id",children:"Select Product *"}),e.jsxs(R,{value:o.product_id,onValueChange:s=>c("product_id",s),children:[e.jsx(H,{children:e.jsx(E,{placeholder:"Choose a product"})}),e.jsx(F,{className:"bg-white",children:p.map(s=>e.jsxs(V,{value:s.id.toString(),children:[s.name," - $",s.price]},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"display_order",children:"Display Order"}),e.jsx(z,{id:"display_order",type:"number",value:o.display_order,onChange:s=>c("display_order",parseInt(s.target.value))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{type:"submit",disabled:b,children:"Add Product"}),e.jsx(t,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"})]})]})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:d.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("p",{children:"No products in this collection yet."}),e.jsx("p",{className:"text-sm mt-2",children:'Click "Add Product" to start adding products.'})]}):e.jsxs(T,{children:[e.jsx(A,{children:e.jsxs(x,{children:[e.jsx(r,{children:"Image"}),e.jsx(r,{children:"Product Name"}),e.jsx(r,{children:"Category"}),e.jsx(r,{children:"Brand"}),e.jsx(r,{children:"Price"}),e.jsx(r,{children:"Display Order"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(B,{children:d.map(s=>{var n,m,h;return e.jsxs(x,{children:[e.jsx(i,{children:s.images&&s.images.length>0?e.jsx("img",{src:s.images[0].image_path,alt:s.name,className:"w-16 h-16 object-cover rounded"}):e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400 text-xs",children:"No image"})})}),e.jsx(i,{className:"font-medium",children:s.name}),e.jsx(i,{children:(n=s.category)==null?void 0:n.name}),e.jsx(i,{children:(m=s.brand)==null?void 0:m.name}),e.jsxs(i,{children:["$",s.price]}),e.jsx(i,{children:(h=s.pivot)==null?void 0:h.display_order}),e.jsx(i,{children:e.jsx(t,{variant:"destructive",size:"sm",onClick:()=>y(s.id),children:"Remove"})})]},s.id)})})]})})]})]})}export{ne as default};
