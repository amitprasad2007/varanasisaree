import{r as N,j as e,L as y,$ as d,S as h}from"./app-DF2liKJQ.js";import{B as u}from"./badge-DFa9dVy_.js";import{B as i}from"./button-CSMxSizN.js";import{T as v,a as C,b as c,c as t,d as D,e as r}from"./table-CXUrIRGU.js";import{A as w,a as A,b as T,c as S,d as _,e as $,f as B,g as k,h as M}from"./alert-dialog-j9QtcjGJ.js";import{S as E}from"./switch-BmUkMKly.js";import{u as F,D as P,B as H}from"./DashboardLayout-_MNNtgTW.js";import{B as L}from"./breadcrumbs-DaAl0tXI.js";import{S as j}from"./sweetalert2.esm.all-DGhwgajj.js";import{P as p}from"./plus-BqD-oHz9.js";import{C as z}from"./calendar-Bbsk6Hjn.js";import{f as I}from"./format-CBpsKyOP.js";import{S as R}from"./square-pen-DP-fGoK2.js";import{T as q}from"./trash-2-7Sy2_3C7.js";import"./utils-YRq8zgdo.js";import"./index-nqAbQ5RS.js";import"./index-DezPPtMi.js";import"./Combination-BT7iuYvk.js";import"./index-M4HIUlSQ.js";import"./index-BTJGmF2v.js";import"./card-CRdfoNyN.js";import"./user-DCLcrHz4.js";import"./shopping-cart-CDHmQEtA.js";import"./log-out-zVsE4qPx.js";function he({coupons:o}){const[a,l]=N.useState(null);F();const f=()=>{a&&h.delete(route("coupons.destroy",a.id),{onSuccess:()=>{j.fire({title:"Coupon Deleted",text:`${a.code} has been deleted successfully.`,icon:"success",timer:4e3,showConfirmButton:!1}),l(null)}})},g=s=>{h.post(route("coupons.update-status",s.id),{},{onSuccess:()=>{j.fire({title:`Coupon ${s.status?"Deactivated":"Activated"}`,text:`${s.code} has been ${s.status?"deactivated":"activated"} successfully.`,icon:"success",timer:4e3,showConfirmButton:!1})}})},x=s=>s?new Date(s)<new Date:!1,n=s=>{if(s===null)return"-";if(typeof s=="string"){const m=parseFloat(s);return isNaN(m)?"-":`₹${m.toFixed(2)}`}return typeof s!="number"?"-":`₹${s.toFixed(2)}`},b=[{title:"Dashboard",href:route("dashboard")},{title:"Coupons",href:route("coupons.index")}];return e.jsxs(P,{title:"Coupons",children:[e.jsx(y,{title:"Coupons"}),e.jsxs("div",{className:"space-y-4 pb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Coupons"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage discount coupons for your store"})]}),e.jsx(d,{href:route("coupons.create"),children:e.jsxs(i,{variant:"outline",className:"flex items-center gap-2 bg-primary cursor-pointer hover:bg-gray-100 text-black shadow-sm",children:[e.jsx(p,{className:"mr-2 h-4 w-4"})," Add Coupon"]})})]}),e.jsx(L,{breadcrumbs:b})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(v,{children:[e.jsx(C,{children:e.jsxs(c,{children:[e.jsx(t,{children:"Code"}),e.jsx(t,{children:"Type"}),e.jsx(t,{children:"Value"}),e.jsx(t,{children:"Min. Spend"}),e.jsx(t,{children:"Max Discount"}),e.jsx(t,{children:"Usage"}),e.jsx(t,{children:"Expires"}),e.jsx(t,{children:"Status"}),e.jsx(t,{className:"text-right",children:"Actions"})]})}),e.jsx(D,{children:o.length===0?e.jsx(c,{children:e.jsx(r,{colSpan:9,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx(H,{className:"h-12 w-12 text-muted-foreground mb-2"}),e.jsx("h3",{className:"text-lg font-medium",children:"No coupons found"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Get started by creating a new coupon."}),e.jsx(d,{href:route("coupons.create"),className:"mt-4",children:e.jsxs(i,{children:[e.jsx(p,{className:"mr-2 h-4 w-4"})," Add Coupon"]})})]})})}):o.map(s=>e.jsxs(c,{children:[e.jsx(r,{className:"font-medium",children:s.code}),e.jsx(r,{children:e.jsx(u,{variant:s.type==="percentage"?"default":"secondary",children:s.type==="percentage"?"Percentage":"Fixed"})}),e.jsx(r,{children:s.type==="percentage"?`${s.value}%`:n(s.value)}),e.jsx(r,{children:s.min_spend?n(s.min_spend):"-"}),e.jsx(r,{children:s.max_discount?n(s.max_discount):"-"}),e.jsx(r,{children:s.usage_limit?`${s.used_count} / ${s.usage_limit}`:`${s.used_count} / ∞`}),e.jsx(r,{children:s.expires_at?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(z,{className:"h-3 w-3"}),e.jsx("span",{className:x(s.expires_at)?"text-red-500":"",children:I(new Date(s.expires_at),"MMM dd, yyyy")}),x(s.expires_at)&&e.jsx(u,{variant:"expired",children:"Expired"})]}):"Never"}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{checked:s.status,onCheckedChange:()=>g(s)}),e.jsx("span",{children:s.status?"Active":"Inactive"})]})}),e.jsx(r,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(d,{href:route("coupons.edit",s.id),children:e.jsx(i,{variant:"outline",className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",size:"sm",children:e.jsx(R,{className:"h-4 w-4"})})}),e.jsxs(w,{children:[e.jsx(A,{asChild:!0,children:e.jsx(i,{variant:"outline",size:"sm",className:"text-red-500 border-red-200 cursor-pointer hover:bg-red-50 hover:text-red-600",onClick:()=>l(s),children:e.jsx(q,{className:"h-4 w-4"})})}),a&&e.jsxs(T,{children:[e.jsxs(S,{children:[e.jsx(_,{children:"Delete Coupon"}),e.jsxs($,{children:['Are you sure you want to delete coupon "',a.code,'"? This action cannot be undone.']})]}),e.jsxs(B,{children:[e.jsx(k,{className:"cursor-pointer",onClick:()=>l(null),children:"Cancel"}),e.jsx(M,{onClick:f,className:"bg-red-500 text-white hover:bg-red-600 cursor-pointer",children:"Delete"})]})]})]})]})})]},s.id))})]})})]})}export{he as default};
