import{r as b,m as w,j as e,L as N,$ as y}from"./app-BNo6aVIm.js";import{D as C}from"./DashboardLayout-DK_Br-bz.js";import{B as c}from"./button-BY1x4xdf.js";import{I as d}from"./input-BLO9h81v.js";import{L as l}from"./label-BSA29Cp5.js";import{C as F}from"./checkbox-DCls-2qF.js";import{A as U,a as k,b as A}from"./avatar-DcYGiwXB.js";import{B as D}from"./breadcrumbs-NveKg06I.js";import{S as x}from"./sweetalert2.all-xzkOidHc.js";import{A as L}from"./arrow-left-BpI6yGno.js";import"./index-DeNSgcGT.js";import"./utils-9ycPlse5.js";import"./index-DuUQFe1-.js";import"./tooltip-BlAwYVYY.js";import"./index-1_cBaBpi.js";import"./check-CuBk5jJ8.js";function Q({roles:h}){const[n,p]=b.useState(null),{data:a,setData:t,post:j,processing:u,errors:r}=w({name:"",email:"",password:"",phone:"",address:"",avatar:null,role_ids:[]}),f=s=>{s.preventDefault(),j(route("users.store"),{forceFormData:!0,onSuccess:()=>{x.fire({title:"Success",text:"User created successfully.",icon:"success"})},onError:()=>{x.fire({title:"Error",text:"Please correct the highlighted errors.",icon:"error"})}})},g=s=>{var o;const i=(o=s.target.files)==null?void 0:o[0];if(i){t("avatar",i);const m=new FileReader;m.onloadend=()=>{p(m.result)},m.readAsDataURL(i)}},v=[{title:"Dashboard",href:route("dashboard")},{title:"User Management",href:route("users.index")},{title:"Create User",href:route("users.create")}];return e.jsxs(C,{title:"Create New User",children:[e.jsx(N,{title:"Create User"}),e.jsxs("div",{className:"space-y-4 pb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Create New User"}),e.jsx(y,{href:route("users.index"),children:e.jsxs(c,{className:"flex items-center gap-2 bg-primary cursor-pointer hover:bg-gray-100 text-black shadow-sm",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Back to User Management"]})})]}),e.jsx(D,{breadcrumbs:v}),e.jsx("form",{onSubmit:f,className:"max-w-2xl bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"h-24 w-24 cursor-pointer",children:n?e.jsx(k,{src:n,alt:"Preview"}):e.jsx(A,{className:"text-gray-500 text-sm font-bold border border-gray-300",children:"Upload"})}),e.jsx(d,{type:"file",className:"absolute inset-0 opacity-0 cursor-pointer hover:bg-gray-100 text-black shadow-sm",onChange:g,accept:"image/*"})]})}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"name",children:"Name"}),e.jsx(d,{id:"name",type:"text",value:a.name,onChange:s=>t("name",s.target.value)}),r.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.name})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"email",children:"Email"}),e.jsx(d,{id:"email",type:"email",value:a.email,onChange:s=>t("email",s.target.value)}),r.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.email})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"password",children:"Password"}),e.jsx(d,{id:"password",type:"password",value:a.password,onChange:s=>t("password",s.target.value)}),r.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.password})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"phone",children:"Mobile"}),e.jsx(d,{id:"phone",type:"tel",value:a.phone,onChange:s=>t("phone",s.target.value)}),r.phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.phone})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"address",children:"Address"}),e.jsx(d,{id:"address",type:"text",value:a.address,onChange:s=>t("address",s.target.value)}),r.address&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.address})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Roles"}),e.jsx("div",{className:"mt-2 space-y-2",children:h.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{id:`role-${s.id}`,checked:a.role_ids.includes(s.id),onCheckedChange:i=>{t("role_ids",i?[...a.role_ids,s.id]:a.role_ids.filter(o=>o!==s.id))}}),e.jsx(l,{htmlFor:`role-${s.id}`,children:s.name}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",(s.permissions??[]).map(i=>i.name).join(", "),")"]})]},s.id))}),r.role_ids&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.role_ids})]}),e.jsx(c,{type:"submit",className:"flex items-center gap-2 bg-primary cursor-pointer hover:bg-gray-100 text-black shadow-sm",disabled:u,children:"Create User"})]})})]})]})}export{Q as default};
