import{r as T,j as e,$ as w,S as F}from"./app-Dt8SgsQa.js";import{D as _}from"./DashboardLayout-DEQKCvuo.js";import{B as u}from"./button-CinZz_E3.js";import{C as E,a as D,b as k,d as P,c as U,e as A}from"./card-dyfhA3gN.js";import{u as B,g as I,F as R,a as t,b as r,c as o,d as l,f as c,e as d}from"./form-Dohrwbdw.js";import{I as m}from"./input-_HtNOqwo.js";import{T as g}from"./textarea-Czhx2otV.js";import{S as H}from"./switch-B6LAF2YT.js";import{s as L}from"./zod-CxggxSVo.js";import{o as O,e as f,c as $,s as p,a as q}from"./index-B9ALDWfZ.js";import{B as M}from"./breadcrumbs-CrFOs0nJ.js";import{S as J}from"./sweetalert2.all-llSnEV2y.js";import{A as V}from"./arrow-left-DXFVmprL.js";import"./index-CpzvdnLv.js";import"./utils-DwlY4Opt.js";import"./index-aEagMRCk.js";import"./tooltip-CtzGXkBW.js";import"./label-Dj3Ny-Y9.js";import"./index-CjDj3mzt.js";const z=O({name:p().min(1,"Client name is required"),designation:p().optional(),email:p().optional(),company:p().optional(),photo:q().optional(),testimonial:p().min(1,"Testimonial content is required"),testimonial_hi:p().optional(),rating:$.number().min(1).max(5).optional().nullable(),status:f(["active","inactive"]),approval_status:f(["pending","approved","rejected"])});function he({testimonial:n}){const[j,v]=T.useState(n.photo?`/storage/${n.photo}`:null),x=B({resolver:L(z),defaultValues:{name:n.name,email:n.email||"",designation:n.designation||"",company:n.company||"",photo:null,testimonial:n.testimonial,testimonial_hi:n.testimonial_hi||"",rating:n.rating,status:n.status,approval_status:n.approval_status}}),{control:a,handleSubmit:b,formState:G}=x,{field:y}=I({name:"photo",control:a}),C=s=>{if(s.target.files&&s.target.files.length>0){const i=s.target.files[0];y.onChange(i);const h=new FileReader;h.onload=()=>{v(h.result)},h.readAsDataURL(i)}},N=s=>{const i=new FormData;i.append("_method","PUT"),i.append("name",s.name),i.append("email",s.email||""),s.designation&&i.append("designation",s.designation),s.company&&i.append("company",s.company),s.photo&&i.append("photo",s.photo),i.append("testimonial",s.testimonial),s.testimonial_hi&&i.append("testimonial_hi",s.testimonial_hi),s.rating!==null&&i.append("rating",String(s.rating)),i.append("status",s.status),i.append("approval_status",s.approval_status),F.post(route("testimonials.update",n.id),i,{onSuccess:()=>{J.fire({title:"Success!",text:"Testimonial has been Updated successfully.",icon:"success",timer:4e3,showConfirmButton:!1})}})},S=[{title:"Dashboard",href:route("dashboard")},{title:"Testimonials",href:route("testimonials.index")},{title:"Edit Testimonials",href:route("testimonials.update",n.id)}];return e.jsxs(_,{title:"Edit Testimonial",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Edit Testimonial"}),e.jsxs("p",{className:"text-muted-foreground",children:["Update the testimonial from ",n.name]})]}),e.jsx(u,{variant:"outline",asChild:!0,children:e.jsxs(w,{href:route("testimonials.index"),children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Back to Testimonials"]})})]}),e.jsx(M,{breadcrumbs:S})]}),e.jsxs(E,{children:[e.jsxs(D,{children:[e.jsx(k,{children:"Testimonial Details"}),e.jsx(P,{children:"Update the testimonial information"})]}),e.jsx(U,{children:e.jsx(R,{...x,children:e.jsxs("form",{onSubmit:b(N),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(t,{control:a,name:"name",render:({field:s})=>e.jsxs(r,{children:[e.jsx(o,{children:"Client Name*"}),e.jsx(l,{children:e.jsx(m,{placeholder:"John Doe",...s})}),e.jsx(c,{})]})}),e.jsx(t,{control:a,name:"designation",render:({field:s})=>e.jsxs(r,{children:[e.jsx(o,{children:"Position"}),e.jsx(l,{children:e.jsx(m,{placeholder:"CEO",...s})}),e.jsx(d,{children:"Client's job title or position"}),e.jsx(c,{})]})}),e.jsx(t,{control:a,name:"email",render:({field:s})=>e.jsxs(r,{children:[e.jsx(o,{children:"Email"}),e.jsx(l,{children:e.jsx(m,{type:"email",placeholder:"email id",...s})}),e.jsx(d,{children:"Client's Email id"}),e.jsx(c,{})]})}),e.jsx(t,{control:a,name:"company",render:({field:s})=>e.jsxs(r,{children:[e.jsx(o,{children:"Company"}),e.jsx(l,{children:e.jsx(m,{placeholder:"Acme Inc.",...s})}),e.jsx(c,{})]})}),e.jsx(t,{control:a,name:"rating",render:({field:s})=>e.jsxs(r,{children:[e.jsx(o,{children:"Rating (1-5)"}),e.jsx(l,{children:e.jsx(m,{type:"number",min:1,max:5,placeholder:"5",...s,value:s.value===null?"":s.value,onChange:i=>{const h=i.target.value===""?null:parseInt(i.target.value,10);s.onChange(h)}})}),e.jsx(d,{children:"Optional rating out of 5 stars"}),e.jsx(c,{})]})}),e.jsx(t,{control:a,name:"photo",render:()=>e.jsxs(r,{children:[e.jsx(o,{children:"Client Photo"}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{type:"file",accept:"image/*",onChange:C}),j&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:j,alt:"Preview",className:"w-24 h-24 rounded-full object-cover border"})})]})}),e.jsx(d,{children:"Upload a new photo or leave empty to keep the current one"}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(t,{control:a,name:"testimonial",render:({field:s})=>e.jsxs(r,{children:[e.jsx(o,{children:"Testimonial Content (English)*"}),e.jsx(l,{children:e.jsx(g,{placeholder:"Enter the testimonial content in English",className:"min-h-[150px]",...s})}),e.jsx(c,{})]})}),e.jsx(t,{control:a,name:"testimonial_hi",render:({field:s})=>e.jsxs(r,{children:[e.jsx(o,{children:"Testimonial Content (Hindi)"}),e.jsx(l,{children:e.jsx(g,{placeholder:"Enter the testimonial content in Hindi",className:"min-h-[150px]",...s})}),e.jsx(d,{children:"Optional Hindi translation of the testimonial"}),e.jsx(c,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4",children:[e.jsx(t,{control:a,name:"status",render:({field:s})=>e.jsxs(r,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(o,{className:"text-base",children:"Active Status"}),e.jsx(d,{children:"Set if this testimonial is active"})]}),e.jsx(l,{children:e.jsx(H,{checked:s.value==="active",onCheckedChange:i=>s.onChange(i?"active":"inactive")})})]})}),e.jsx(t,{control:a,name:"approval_status",render:({field:s})=>e.jsxs(r,{children:[e.jsx(o,{children:"Approval Status"}),e.jsx(l,{children:e.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",value:s.value,onChange:i=>s.onChange(i.target.value),children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})}),e.jsx(d,{children:"Manage the approval workflow"}),e.jsx(c,{})]})})]})]})]}),e.jsx(A,{className:"flex justify-end px-0 pb-0",children:e.jsx(u,{type:"submit",variant:"outline",className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",disabled:x.formState.isSubmitting,children:x.formState.isSubmitting?"Updating...":"Update Testimonial"})})]})})})]})]})}export{he as default};
