import{r as x,m as S,j as e,$ as m,a as f}from"./app-Cu1Mo5fE.js";import{D,C as P,a as T,b as V,i as A,c as E}from"./DashboardLayout-Cm2bRT_k.js";import{B as l}from"./button-MXUFE7vG.js";import{T as _,a as F,b as j,c as o,d as R,e as n}from"./table-CbwAKWhr.js";import{B as p}from"./badge-DdOAchmU.js";import{D as $,C as k,P as I}from"./dnd.esm-CEWlm3Of.js";import{B as H}from"./breadcrumbs-BKgI37tE.js";import{S as c}from"./sweetalert2.esm.all-DGhwgajj.js";import{A as L}from"./arrow-left-dNHeE4nQ.js";import{P as b}from"./plus-9qG7KlEd.js";import{S as z}from"./star-CyTDuQsX.js";import{P as Y}from"./pencil-HE65ndEv.js";import{T as M}from"./trash-2-BK50b3cN.js";import"./index-DWyO1I2m.js";import"./utils-Bp-j8zWL.js";import"./index-CeFROCQn.js";import"./tiny-invariant-BaFNuDhB.js";function le({product:t,videos:g}){const[h,u]=x.useState(g),[q,G]=x.useState(!1),{delete:w}=S(),N=r=>{c.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(s=>{s.isConfirmed&&w(route("product-videos.destroy",[t.id,r]),{onSuccess:()=>{c.fire({title:"Deleted!",text:"Your Subcategory has been deleted.",icon:"success",timer:3e3,showConfirmButton:!1}),u(h.filter(d=>d.id!==r))}})})},y=r=>{f.post(`/product-videos/${r}/set-featured`).then(s=>{c.fire({title:"Success!",text:"Video Marked as Featured",icon:"success",timer:4e3,showConfirmButton:!1});const d=h.map(a=>({...a,is_featured:a.id===r}));u(d)}).catch(s=>{c.fire({title:"Error!",text:"Error setting video as featured",icon:"error",timer:4e3,showConfirmButton:!1})})},C=r=>{if(!r.destination)return;const s=Array.from(h),[d]=s.splice(r.source.index,1);s.splice(r.destination.index,0,d);const a=s.map((i,B)=>({...i,display_order:B}));u(a),f.post(`/products/${t.id}/videos/update-order`,{videos:a.map(i=>({id:i.id,display_order:i.display_order}))}).then(i=>{c.fire({title:"Success!",text:"Video order updated successfully",icon:"success",timer:4e3,showConfirmButton:!1})}).catch(i=>{c.fire({title:"Error!",text:"Error updating video order",icon:"error",timer:4e3,showConfirmButton:!1}),console.error(i)})},v=[{title:"Dashboard",href:route("dashboard")},{title:"Product",href:route("products.index")},{title:"Show Product",href:route("products.show",t.id)},{title:"Product Video",href:route("product-videos.index",t.id)}];return e.jsx(D,{title:`Videos for ${t.name}`,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Product Videos"}),e.jsxs("p",{className:"text-muted-foreground",children:["Manage videos for ",t.name]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{variant:"outline",asChild:!0,children:e.jsxs(m,{href:route("products.show",t.id),children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Back to Product"]})}),e.jsx(l,{asChild:!0,variant:"outline",children:e.jsxs(m,{href:route("product-videos.create",t.id),children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Add New Video"]})})]})]}),e.jsx(H,{breadcrumbs:v}),e.jsxs(P,{children:[e.jsxs(T,{children:[e.jsx(V,{children:"Videos"}),e.jsx(A,{children:"Drag and drop to reorder videos, set featured video, or edit video details"})]}),e.jsx(E,{children:h.length>0?e.jsx($,{onDragEnd:C,children:e.jsx(k,{droppableId:"videos",children:r=>e.jsx("div",{...r.droppableProps,ref:r.innerRef,children:e.jsxs(_,{children:[e.jsx(F,{children:e.jsxs(j,{children:[e.jsx(o,{style:{width:50},children:"#"}),e.jsx(o,{children:"Thumbnail"}),e.jsx(o,{children:"Title"}),e.jsx(o,{children:"Provider"}),e.jsx(o,{children:"Video ID"}),e.jsx(o,{children:"Status"}),e.jsx(o,{children:"Featured"}),e.jsx(o,{children:"Actions"})]})}),e.jsxs(R,{children:[h.map((s,d)=>e.jsx(I,{draggableId:s.id.toString(),index:d,children:a=>{var i;return e.jsxs(j,{ref:a.innerRef,...a.draggableProps,...a.dragHandleProps,children:[e.jsx(n,{className:"w-10",children:d+1}),e.jsx(n,{children:s.thumbnail?e.jsx("img",{src:`/storage/${s.thumbnail}`,alt:s.title,className:"h-12 w-20 object-cover rounded"}):e.jsx("div",{className:"h-12 w-20 bg-gray-200 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-gray-500",children:"No thumbnail"})})}),e.jsx(n,{className:"font-medium",children:s.title}),e.jsx(n,{children:(i=s.video_provider)==null?void 0:i.name}),e.jsx(n,{className:"truncate max-w-[120px]",children:s.video_id}),e.jsx(n,{children:e.jsx(p,{variant:s.status==="active"?"secondary":"default",children:s.status})}),e.jsx(n,{children:s.is_featured?e.jsxs(p,{className:"bg-yellow-500",children:[e.jsx(z,{className:"h-3 w-3 mr-1"}),"Featured"]}):e.jsx(l,{size:"sm",variant:"outline",className:"cursor-pointer",onClick:()=>y(s.id),children:"Set Featured"})}),e.jsx(n,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(l,{size:"sm",variant:"outline",asChild:!0,children:e.jsx(m,{href:route("product-videos.edit",[t.id,s.id]),children:e.jsx(Y,{className:"h-4 w-4"})})}),e.jsx(l,{size:"sm",variant:"outline",className:"cursor-pointer text-red-600 hover:bg-red-50",onClick:()=>N(s.id),children:e.jsx(M,{className:"h-4 w-4"})})]})})]})}},s.id.toString())),r.placeholder]})]})})})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"rounded-full bg-gray-100 p-4 mb-4",children:e.jsx("video",{className:"h-12 w-12 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No videos yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Add videos to showcase your product features and functionality"}),e.jsx(l,{asChild:!0,children:e.jsxs(m,{href:route("product-videos.create",t.id),children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Add First Video"]})})]})})]})]})})}export{le as default};
