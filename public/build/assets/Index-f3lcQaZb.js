import{r as B,j as e,L as q,S as n}from"./app-DgxAqZIh.js";import{D as L,F as N}from"./DashboardLayout-T__Wzna3.js";import{B as i}from"./button-BdIkOZPE.js";import{B as v}from"./badge-C8hEx-7x.js";import{C as d,a as o,b as x,c as m,d as I}from"./card-BuoT8ScV.js";import{T as P,a as D,b as C,c as a,d as E,e as c}from"./table-zCqAAXdz.js";import{S as b,a as w,b as S,c as T,d as t}from"./select-B3TSRGvZ.js";import{P as R}from"./plus-Dmmdjp4Q.js";import{C as f}from"./clock-Ct-NzLDS.js";import{C as g}from"./circle-check-big-wUizypV_.js";import{C as H}from"./credit-card-BYuBEcYe.js";import{E as V}from"./eye-CCHmcvnS.js";import{C as p}from"./circle-x-IMFtf0El.js";import{C as z}from"./circle-alert-BUHe7oL-.js";import{f as U}from"./format-CBpsKyOP.js";import"./index-Ba_FneK2.js";import"./utils-DwYqQn47.js";import"./index-Ch4nA-VE.js";import"./sweetalert2.esm.all-DGhwgajj.js";import"./shopping-cart-DLwSuZv_.js";import"./log-out-BHgaQSNh.js";import"./index-CBlRRNRR.js";import"./index-DRCW6475.js";import"./Combination-CYE5KBks.js";import"./check-DQduarsC.js";const Y={pending:"bg-yellow-100 text-yellow-800",approved:"bg-blue-100 text-blue-800",rejected:"bg-red-100 text-red-800",processing:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"},$={pending:f,approved:g,rejected:p,processing:z,completed:g,failed:p,cancelled:p};function fe({refunds:r,filters:A,statistics:h}){const[j,_]=B.useState(A),y=(s,l)=>{_(u=>({...u,[s]:l}))},F=()=>{n.get(route("customer.refunds.index"),j,{preserveState:!0,replace:!0})},M=s=>{const l=$[s]||f;return e.jsx(l,{className:"h-4 w-4"})},k=s=>s.sale?`Sale #${s.sale.id}`:s.order?`Order #${s.order.id}`:"N/A";return e.jsxs(L,{title:"My Refunds",children:[e.jsx(q,{title:"My Refunds"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"My Refunds"}),e.jsx("p",{className:"text-muted-foreground",children:"Track your refund requests and credit notes"})]}),e.jsxs(i,{onClick:()=>n.get(route("customer.refunds.create")),children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Request Refund"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(d,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Total Refunds"}),e.jsx(N,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold",children:h.total_refunds})})]}),e.jsxs(d,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Pending"}),e.jsx(f,{className:"h-4 w-4 text-yellow-500"})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:h.pending_refunds})})]}),e.jsxs(d,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Completed"}),e.jsx(g,{className:"h-4 w-4 text-green-500"})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:h.completed_refunds})})]}),e.jsxs(d,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Credit Balance"}),e.jsx(H,{className:"h-4 w-4 text-blue-500"})]}),e.jsxs(m,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["₹",h.total_credit_amount.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.active_credit_notes," active credit notes"]})]})]})]}),e.jsxs(d,{children:[e.jsx(o,{children:e.jsx(x,{children:"Filters"})}),e.jsx(m,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs(b,{value:j.status||"",onValueChange:s=>y("status",s),children:[e.jsx(w,{children:e.jsx(S,{placeholder:"All Statuses"})}),e.jsxs(T,{children:[e.jsx(t,{value:"",children:"All Statuses"}),e.jsx(t,{value:"pending",children:"Pending"}),e.jsx(t,{value:"approved",children:"Approved"}),e.jsx(t,{value:"rejected",children:"Rejected"}),e.jsx(t,{value:"processing",children:"Processing"}),e.jsx(t,{value:"completed",children:"Completed"}),e.jsx(t,{value:"failed",children:"Failed"}),e.jsx(t,{value:"cancelled",children:"Cancelled"})]})]})}),e.jsx("div",{className:"flex-1",children:e.jsxs(b,{value:j.refund_type||"",onValueChange:s=>y("refund_type",s),children:[e.jsx(w,{children:e.jsx(S,{placeholder:"All Types"})}),e.jsxs(T,{children:[e.jsx(t,{value:"",children:"All Types"}),e.jsx(t,{value:"credit_note",children:"Credit Note"}),e.jsx(t,{value:"money",children:"Money Refund"})]})]})}),e.jsx(i,{onClick:F,children:"Apply Filters"})]})})]}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsx(x,{children:"Refund Requests"}),e.jsx(I,{children:"A list of all your refund requests and their current status"})]}),e.jsxs(m,{children:[r.data.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(N,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No refunds found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"You haven't requested any refunds yet."}),e.jsxs(i,{onClick:()=>n.get(route("customer.refunds.create")),children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Request Your First Refund"]})]}):e.jsxs(P,{children:[e.jsx(D,{children:e.jsxs(C,{children:[e.jsx(a,{children:"Reference"}),e.jsx(a,{children:"Source"}),e.jsx(a,{children:"Amount"}),e.jsx(a,{children:"Method"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Created"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(E,{children:r.data.map(s=>{var u;const l=k(s);return e.jsxs(C,{children:[e.jsx(c,{className:"font-medium",children:s.reference}),e.jsx(c,{children:l}),e.jsxs(c,{children:["₹",s.amount.toLocaleString()]}),e.jsx(c,{children:e.jsx(v,{variant:"outline",children:((u=s.method)==null?void 0:u.replace("_"," ").toUpperCase())||"N/A"})}),e.jsx(c,{children:e.jsx(v,{className:Y[s.status],children:e.jsxs("span",{className:"flex items-center gap-1",children:[M(s.status),s.status.charAt(0).toUpperCase()+s.status.slice(1)]})})}),e.jsx(c,{children:U(new Date(s.created_at),"MMM dd, yyyy")}),e.jsx(c,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>n.get(route("customer.refunds.show",s.id)),children:e.jsx(V,{className:"h-4 w-4"})}),s.status==="pending"&&e.jsx(i,{variant:"destructive",size:"sm",onClick:()=>{confirm("Are you sure you want to cancel this refund request?")&&n.post(route("customer.refunds.cancel",s.id))},children:"Cancel"})]})})]},s.id)})})]}),r.links&&r.data.length>0&&e.jsxs("div",{className:"flex items-center justify-between space-x-2 py-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",r.meta.from," to ",r.meta.to," of ",r.meta.total," results"]}),e.jsx("div",{className:"flex space-x-2",children:r.links.map((s,l)=>e.jsx(i,{variant:s.active?"default":"outline",size:"sm",onClick:()=>s.url&&n.get(s.url),disabled:!s.url,children:e.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})},l))})]})]})]})]})]})}export{fe as default};
