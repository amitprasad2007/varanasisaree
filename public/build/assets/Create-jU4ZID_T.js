import{r as v,m as f,j as e,L as g}from"./app-Dt8SgsQa.js";import{D as w}from"./DashboardLayout-DEQKCvuo.js";import{B as N}from"./button-CinZz_E3.js";import{I as n}from"./input-_HtNOqwo.js";import{L as l}from"./label-Dj3Ny-Y9.js";import{C as b}from"./checkbox-DEhtVApV.js";import{A as C,a as y,b as F}from"./avatar-D0503qTk.js";import"./index-CpzvdnLv.js";import"./utils-DwlY4Opt.js";import"./index-aEagMRCk.js";import"./tooltip-CtzGXkBW.js";import"./sweetalert2.all-llSnEV2y.js";import"./index-CjDj3mzt.js";import"./check-DOM1nwc0.js";function k({roles:c}){const[m,x]=v.useState(null),{data:a,setData:d,post:p,processing:h,errors:t}=f({name:"",email:"",password:"",phone:"",address:"",avatar:null,role_ids:[]}),j=s=>{s.preventDefault();const i=new FormData;Object.keys(a).forEach(r=>{r==="role_ids"?a[r].forEach(o=>{i.append(`${r}[]`,o.toString())}):a[r]!==null&&i.append(r,a[r])}),p(route("users.store"))},u=s=>{var r;const i=(r=s.target.files)==null?void 0:r[0];if(i){d("avatar",i);const o=new FileReader;o.onloadend=()=>{x(o.result)},o.readAsDataURL(i)}};return e.jsxs(w,{title:"Create New User",children:[e.jsx(g,{title:"Create User"}),e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Create New User"}),e.jsx("form",{onSubmit:j,className:"max-w-2xl bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"h-24 w-24",children:m?e.jsx(y,{src:m,alt:"Preview"}):e.jsx(F,{children:"Upload"})}),e.jsx(n,{type:"file",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:u,accept:"image/*"})]})}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"name",children:"Name"}),e.jsx(n,{id:"name",type:"text",value:a.name,onChange:s=>d("name",s.target.value)}),t.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.name})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"email",children:"Email"}),e.jsx(n,{id:"email",type:"email",value:a.email,onChange:s=>d("email",s.target.value)}),t.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.email})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"password",children:"Password"}),e.jsx(n,{id:"password",type:"password",value:a.password,onChange:s=>d("password",s.target.value)}),t.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.password})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"phone",children:"Mobile"}),e.jsx(n,{id:"phone",type:"tel",value:a.phone,onChange:s=>d("phone",s.target.value)}),t.phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.phone})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"address",children:"Address"}),e.jsx(n,{id:"address",type:"text",value:a.address,onChange:s=>d("address",s.target.value)}),t.address&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.address})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Roles"}),e.jsx("div",{className:"mt-2 space-y-2",children:c.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{id:`role-${s.id}`,checked:a.role_ids.includes(s.id),onCheckedChange:i=>{d("role_ids",i?[...a.role_ids,s.id]:a.role_ids.filter(r=>r!==s.id))}}),e.jsx(l,{htmlFor:`role-${s.id}`,children:s.name}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",s.permissions.map(i=>i.name).join(", "),")"]})]},s.id))}),t.role_ids&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.role_ids})]}),e.jsx(N,{type:"submit",disabled:h,children:"Create User"})]})})]})]})}export{k as default};
